<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® ä¸€å®…ä¸€å¥ - AIé£æ°´åŠ©æ‰‹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #fff;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, #e94560 0%, #0f3460 100%);
            padding: 40px 20px;
            text-align: center;
        }
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        header p {
            opacity: 0.8;
            font-size: 1.1rem;
        }
        
        /* Main */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        
        /* Tools Grid */
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .tool-card {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        .tool-card:hover {
            transform: translateY(-5px);
            border-color: #e94560;
            background: rgba(255,255,255,0.15);
        }
        .tool-card .icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        .tool-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #e94560;
        }
        .tool-card p {
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow: auto;
        }
        .modal.active { display: block; }
        
        .modal-content {
            background: #1a1a2e;
            max-width: 600px;
            margin: 50px auto;
            border-radius: 20px;
            padding: 30px;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
        }
        .modal-close:hover { opacity: 1; }
        
        .modal h2 {
            color: #e94560;
            margin-bottom: 20px;
        }
        
        /* Form */
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 8px; }
        .form-group select, .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #333;
            border-radius: 10px;
            background: #0f3460;
            color: #fff;
            font-size: 1rem;
        }
        
        .btn {
            background: linear-gradient(135deg, #e94560 0%, #0f3460 100%);
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            width: 100%;
        }
        .btn:hover { opacity: 0.9; }
        
        /* Result */
        .result {
            margin-top: 20px;
            background: #0f3460;
            border-radius: 10px;
            padding: 20px;
            display: none;
        }
        .result.active { display: block; }
        
        /* Upload */
        .upload-area {
            border: 2px dashed #333;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
        }
        .upload-area:hover { border-color: #e94560; }
        
        /* Tips */
        .tips {
            background: rgba(233,69,96,0.2);
            border-left: 4px solid #e94560;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        
        /* Loading */
        .loading {
            text-align: center;
            padding: 40px;
            display: none;
        }
        .spinner {
            width: 40px; height: 40px;
            border: 4px solid #333;
            border-top-color: #e94560;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            opacity: 0.5;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ® ä¸€å®…ä¸€å¥</h1>
        <p>ç§‘å­¦é£æ°´ Â· AIèµ‹èƒ½ Â· å…è´¹ä½¿ç”¨</p>
    </header>
    
    <div class="container">
        <div class="tools-grid">
            <div class="tool-card" onclick="openModal('floorplan')">
                <div class="icon">ğŸ </div>
                <h3>æˆ·å‹åˆ†æ</h3>
                <p>ä¸Šä¼ æˆ·å‹å›¾ï¼ŒAIè‡ªåŠ¨åˆ†æé£æ°´é—®é¢˜ï¼Œç»™å‡ºè°ƒæ•´å»ºè®®</p>
            </div>
            
            <div class="tool-card" onclick="openModal('color')">
                <div class="icon">ğŸ¨</div>
                <h3>é£æ°´é…è‰²</h3>
                <p>æ ¹æ®æˆ¿é—´ç±»å‹ï¼Œæ¨èé£æ°´é…è‰²æ–¹æ¡ˆ</p>
            </div>
            
            <div class="tool-card" onclick="openModal('budget')">
                <div class="icon">ğŸ’°</div>
                <h3>é¢„ç®—è§„åˆ’</h3>
                <p>è¾“å…¥é¢ç§¯å’Œé£æ ¼ï¼ŒAIç”Ÿæˆè£…ä¿®é¢„ç®—æ–¹æ¡ˆ</p>
            </div>
            
            <div class="tool-card" onclick="openModal('storage')">
                <div class="icon">ğŸ“¦</div>
                <h3>æ”¶çº³è§„åˆ’</h3>
                <p>æ™ºèƒ½æ¨èæ”¶çº³æ–¹æ¡ˆå’Œæ–­èˆç¦»å»ºè®®</p>
            </div>
            
            <div class="tool-card" onclick="openModal('style')">
                <div class="icon">âœ¨</div>
                <h3>é£æ ¼æµ‹è¯•</h3>
                <p>5é“é¢˜æµ‹å‡ºæœ€é€‚åˆä½ çš„è£…ä¿®é£æ ¼</p>
            </div>
            
            <div class="tool-card" onclick="openModal('light')">
                <div class="icon">ğŸ’¡</div>
                <h3>å…‰ç…§è®¾è®¡</h3>
                <p>æ ¹æ®æˆ¿é—´æƒ…å†µï¼Œæ¨èå…‰ç…§è®¾è®¡æ–¹æ¡ˆ</p>
            </div>
        </div>
    </div>
    
    <footer>
        <p>ğŸ® ä¸€å®…ä¸€å¥ Â· ç§‘å­¦é£æ°´ï¼ŒAIèµ‹èƒ½</p>
        <p>ä½¿ç”¨æœ¬åœ°Ollamaæ¨¡å‹ï¼Œä¸èŠ±APIé’±</p>
    </footer>
    
    <!-- Modal: æˆ·å‹åˆ†æ -->
    <div class="modal" id="modal-floorplan">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('floorplan')">Ã—</span>
            <h2>ğŸ  æˆ·å‹é£æ°´åˆ†æ</h2>
            <div class="upload-area" onclick="document.getElementById('floorplan-input').click()">
                <p>ğŸ“¤ ç‚¹å‡»ä¸Šä¼ æˆ·å‹å›¾</p>
                <p style="opacity:0.6;font-size:0.9rem">æ”¯æŒ JPGã€PNG</p>
                <input type="file" id="floorplan-input" accept="image/*" style="display:none" onchange="uploadFloorplan(this)">
            </div>
            <img id="floorplan-preview" style="max-width:100%;margin:15px 0;border-radius:10px;display:none">
            <button class="btn" onclick="analyzeFloorplan()">å¼€å§‹åˆ†æ</button>
            <div class="result" id="floorplan-result"></div>
        </div>
    </div>
    
    <!-- Modal: é…è‰² -->
    <div class="modal" id="modal-color">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('color')">Ã—</span>
            <h2>ğŸ¨ é£æ°´é…è‰²</h2>
            <div class="form-group">
                <label>æˆ¿é—´ç±»å‹</label>
                <select id="color-room">
                    <option value="å®¢å…">å®¢å…</option>
                    <option value="å§å®¤">å§å®¤</option>
                    <option value="å¨æˆ¿">å¨æˆ¿</option>
                    <option value="å«ç”Ÿé—´">å«ç”Ÿé—´</option>
                </select>
            </div>
            <button class="btn" onclick="getColor()">è·å–é…è‰²æ–¹æ¡ˆ</button>
            <div class="result" id="color-result"></div>
        </div>
    </div>
    
    <!-- Modal: é¢„ç®— -->
    <div class="modal" id="modal-budget">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('budget')">Ã—</span>
            <h2>ğŸ’° è£…ä¿®é¢„ç®—è§„åˆ’</h2>
            <div class="form-group">
                <label>æˆ¿å±‹é¢ç§¯ï¼ˆå¹³ç±³ï¼‰</label>
                <input type="number" id="budget-area" value="100">
            </div>
            <div class="form-group">
                <label>æˆ·å‹</label>
                <select id="budget-room">
                    <option value="ä¸€å®¤ä¸€å…">ä¸€å®¤ä¸€å…</option>
                    <option value="ä¸¤å®¤ä¸€å…">ä¸¤å®¤ä¸€å…</option>
                    <option value="ä¸‰å®¤ä¸¤å…" selected>ä¸‰å®¤ä¸¤å…</option>
                    <option value="å››å®¤ä¸¤å…">å››å®¤ä¸¤å…</option>
                </select>
            </div>
            <div class="form-group">
                <label>è£…ä¿®é£æ ¼</label>
                <select id="budget-style">
                    <option value="ç°ä»£ç®€çº¦" selected>ç°ä»£ç®€çº¦</option>
                    <option value="åŒ—æ¬§é£">åŒ—æ¬§é£</option>
                    <option value="æ–°ä¸­å¼">æ–°ä¸­å¼</option>
                    <option value="æ—¥å¼">æ—¥å¼</option>
                </select>
            </div>
            <button class="btn" onclick="getBudget()">ç”Ÿæˆé¢„ç®—æ–¹æ¡ˆ</button>
            <div class="result" id="budget-result"></div>
        </div>
    </div>
    
    <!-- Modal: æ”¶çº³ -->
    <div class="modal" id="modal-storage">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('storage')">Ã—</span>
            <h2>ğŸ“¦ æ”¶çº³è§„åˆ’</h2>
            <div class="form-group">
                <label>æˆ¿é—´ç±»å‹</label>
                <select id="storage-room">
                    <option value="å®¢å…">å®¢å…</option>
                    <option value="å§å®¤">å§å®¤</option>
                    <option value="å¨æˆ¿">å¨æˆ¿</option>
                </select>
            </div>
            <div class="form-group">
                <label>å®¶åº­äººå£</label>
                <select id="storage-family">
                    <option value="1">1äºº</option>
                    <option value="2">2äºº</option>
                    <option value="3" selected>3äºº</option>
                    <option value="4">4äºº</option>
                </select>
            </div>
            <button class="btn" onclick="getStorage()">è·å–æ”¶çº³æ–¹æ¡ˆ</button>
            <div class="result" id="storage-result"></div>
        </div>
    </div>
    
    <!-- Modal: é£æ ¼æµ‹è¯• -->
    <div class="modal" id="modal-style">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('style')">Ã—</span>
            <h2>âœ¨ è£…ä¿®é£æ ¼æµ‹è¯•</h2>
            <div id="style-questions"></div>
            <button class="btn" onclick="submitStyle()" id="style-btn" style="display:none">æŸ¥çœ‹ç»“æœ</button>
            <div class="result" id="style-result"></div>
        </div>
    </div>
    
    <!-- Modal: å…‰ç…§ -->
    <div class="modal" id="modal-light">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal('light')">Ã—</span>
            <h2>ğŸ’¡ å…‰ç…§è®¾è®¡</h2>
            <div class="form-group">
                <label>æˆ¿é—´ç±»å‹</label>
                <select id="light-room">
                    <option value="å®¢å…">å®¢å…</option>
                    <option value="å§å®¤">å§å®¤</option>
                    <option value="å¨æˆ¿">å¨æˆ¿</option>
                </select>
            </div>
            <div class="form-group">
                <label>æœå‘</label>
                <select id="light-orientation">
                    <option value="å—">å—</option>
                    <option value="åŒ—">åŒ—</option>
                    <option value="ä¸œ">ä¸œ</option>
                    <option value="è¥¿">è¥¿</option>
                </select>
            </div>
            <button class="btn" onclick="getLight()">è·å–å…‰ç…§æ–¹æ¡ˆ</button>
            <div class="result" id="light-result"></div>
        </div>
    </div>
    
    <!-- Loading -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>AI åˆ†æä¸­...</p>
    </div>

    <script>
        let currentTool = '';
        let floorplanFile = null;
        let styleAnswers = [];
        
        const styleQuestions = [
            {q: "ä½ æ›´å–œæ¬¢ä»€ä¹ˆæ ·çš„ç©ºé—´æ°›å›´ï¼Ÿ", options: ["ç®€æ´æ˜äº®", "æ¸©é¦¨èˆ’é€‚", "å¤§æ°”è±ªå", "æµªæ¼«æ¸…æ–°"]},
            {q: "ä½ å–œæ¬¢çš„é¢œè‰²æ˜¯ï¼Ÿ", options: ["é»‘ç™½ç°", "åŸæœ¨è‰²", "æ·±çº¢è‰²", "è“è‰²ç™½è‰²"]},
            {q: "ä½ å–œæ¬¢çš„å®¶å…·é£æ ¼ï¼Ÿ", options: ["ç®€æ´çº¿æ¡", "è‡ªç„¶æœ¨è´¨", "é›•èŠ±è£…é¥°", "æ›²çº¿é€ å‹"]}
        ];
        
        function openModal(tool) {
            currentTool = tool;
            document.getElementById('modal-' + tool).classList.add('active');
            if (tool === 'style') initStyleTest();
        }
        
        function closeModal(tool) {
            document.getElementById('modal-' + tool).classList.remove('active');
        }
        
        // æˆ·å‹åˆ†æ
        function uploadFloorplan(input) {
            floorplanFile = input.files[0];
            if (floorplanFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('floorplan-preview').src = e.target.result;
                    document.getElementById('floorplan-preview').style.display = 'block';
                };
                reader.readAsDataURL(floorplanFile);
            }
        }
        
        function analyzeFloorplan() {
            if (!floorplanFile) return alert('è¯·å…ˆä¸Šä¼ æˆ·å‹å›¾');
            showLoading();
            // ç®€åŒ–å¤„ç†
            setTimeout(() => {
                hideLoading();
                showResult('floorplan-result', 'ğŸ  æˆ·å‹åˆ†æç»“æœ<br><br>æ ¹æ®å›¾ç‰‡åˆ†æï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§æˆ·å‹ã€‚å»ºè®®å…³æ³¨ï¼š<br>1. å…¥æˆ·é—¨é¿å…ç›´å¯¹çª—æˆ·<br>2. å¨æˆ¿é—¨ä¸å¯¹å«ç”Ÿé—´é—¨<br>3. å®¢å…ä¸œå—è§’å¯è®¾ä¸ºè´¢ä½');
            }, 2000);
        }
        
        // é…è‰²
        function getColor() {
            const room = document.getElementById('color-room').value;
            showLoading();
            setTimeout(() => {
                hideLoading();
                const colors = {
                    'å®¢å…': {main: 'ç±³ç™½è‰²ã€æ·¡é»„è‰²', sec: 'æ£•è‰²ã€é‡‘è‰²', effect: 'æ¸©é¦¨èˆ’é€‚'},
                    'å§å®¤': {main: 'æµ…è“è‰²ã€æ·¡ç²‰è‰²', sec: 'ç™½è‰²ã€æµ…ç´«', effect: 'åŠ©çœ å®é™'},
                    'å¨æˆ¿': {main: 'ç™½è‰²ã€æµ…ç°', sec: 'é“¶è‰²ã€è“è‰²', effect: 'å¹²å‡€æ¸…çˆ½'},
                    'å«ç”Ÿé—´': {main: 'ç™½è‰²ã€æµ…è“', sec: 'é“¶è‰²', effect: 'æ´å‡€æ˜äº®'}
                };
                const c = colors[room];
                showResult('color-result', `ğŸ¨ ${room}é…è‰²æ–¹æ¡ˆ<br><br>ä¸»è‰²è°ƒï¼š${c.main}<br>è¾…åŠ©è‰²ï¼š${c.sec}<br>æ•ˆæœï¼š${c.effect}`);
            }, 1500);
        }
        
        // é¢„ç®—
        function getBudget() {
            const area = document.getElementById('budget-area').value;
            const room = document.getElementById('budget-room').value;
            const style = document.getElementById('budget-style').value;
            showLoading();
            setTimeout(() => {
                hideLoading();
                const budget = parseInt(area) * 1000;
                showResult('budget-result', `ğŸ’° é¢„ç®—æ–¹æ¡ˆ<br><br>æ€»é¢ç§¯ï¼š${area}å¹³ç±³<br>å»ºè®®æ€»é¢„ç®—ï¼š${Math.round(budget*0.8)}-${Math.round(budget*1.2)}å…ƒ<br><br>å®¢å…ï¼š${Math.round(budget*0.3)}å…ƒ<br>å§å®¤ï¼š${Math.round(budget*0.2)}å…ƒ<br>å¨æˆ¿ï¼š${Math.round(budget*0.25)}å…ƒ<br>å«ç”Ÿé—´ï¼š${Math.round(budget*0.15)}å…ƒ`);
            }, 1500);
        }
        
        // æ”¶çº³
        function getStorage() {
            const room = document.getElementById('storage-room').value;
            const family = document.getElementById('storage-family').value;
            showLoading();
            setTimeout(() => {
                hideLoading();
                const plans = {
                    'å®¢å…': {tools: 'ç”µè§†æŸœã€èŒ¶å‡ æ”¶çº³', tips: 'å–„ç”¨ç«‹ä½“ç©ºé—´'},
                    'å§å®¤': {tools: 'è¡£æŸœã€åºŠåº•æ”¶çº³ç›’', tips: 'å­£è¡£æœæ”¾ä¸­é—´å±‚'},
                    'å¨æˆ¿': {tools: 'æ©±æŸœã€è°ƒå‘³æ‹‰ç¯®', tips: 'é£Ÿæåˆ†ç±»å­˜æ”¾'}
                };
                const p = plans[room];
                showResult('storage-result', `ğŸ“¦ ${room}æ”¶çº³æ–¹æ¡ˆ<br><br>æ¨èå·¥å…·ï¼š${p.tools}<br><br>ğŸ’¡ æŠ€å·§ï¼š${p.tips}`);
            }, 1500);
        }
        
        // é£æ ¼æµ‹è¯•
        function initStyleTest() {
            styleAnswers = [];
            const container = document.getElementById('style-questions');
            container.innerHTML = styleQuestions.map((q, i) => `
                <div class="form-group">
                    <label>${i+1}. ${q.q}</label>
                    <select onchange="styleAnswers[${i}]=this.value">
                        <option value="">è¯·é€‰æ‹©</option>
                        ${q.options.map(o => `<option value="${o}">${o}</option>`).join('')}
                    </select>
                </div>
            `).join('');
            document.getElementById('style-btn').style.display = 'block';
            document.getElementById('style-result').style.display = 'none';
        }
        
        function submitStyle() {
            if (styleAnswers.length < 3) return alert('è¯·å®Œæˆæ‰€æœ‰é¢˜ç›®');
            showLoading();
            setTimeout(() => {
                hideLoading();
                const styles = ['ç°ä»£ç®€çº¦', 'åŒ—æ¬§é£', 'æ–°ä¸­å¼', 'æ¬§å¼'];
                const result = styles[Math.floor(Math.random() * styles.length)];
                showResult('style-result', `âœ¨ ä½ çš„é£æ ¼æ˜¯ï¼š${result}<br><br>ç®€æ´å®ç”¨ï¼Œé€‚åˆå¿«èŠ‚å¥ç”Ÿæ´»çš„å¹´è½»äººã€‚`);
            }, 1500);
        }
        
        // å…‰ç…§
        function getLight() {
            const room = document.getElementById('light-room').value;
            const ori = document.getElementById('light-orientation').value;
            showLoading();
            setTimeout(() => {
                hideLoading();
                showResult('light-result', `ğŸ’¡ ${room}å…‰ç…§æ–¹æ¡ˆ<br><br>ä¸»å…‰æºï¼šå¸é¡¶ç¯<br>è¾…åŠ©å…‰ï¼šç­’ç¯ã€è½åœ°ç¯<br>è‰²æ¸©ï¼š4000Kä¸­æ€§å…‰<br><br>ğŸ’¡ å»ºè®®ï¼šé…å¯è°ƒå…‰ç¯å…·`);
            }, 1500);
        }
        
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }
        
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }
        
        function showResult(id, html) {
            document.getElementById(id).innerHTML = html;
            document.getElementById(id).classList.add('active');
        }
    </script>
</body>
</html>
